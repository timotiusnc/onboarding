"use strict";angular.module("dsTmApp.components",["angularMoment","angular.filter","infinite-scroll","dsTmApp.i18n","ngResource","firebase"]),angular.module("dsTmApp.models",["dsTmApp.ext.lodash","angularMoment"]),angular.module("dsTmApp.screens",["dsTmApp.components","ui.router"]),angular.module("dsTmApp.i18n",["pascalprecht.translate"]).constant("TM_lang",{en:"en",id:"id"}),angular.module("dsTmApp.ext.lodash",[]).constant("_",window._),angular.module("dsTmApp.ext.jquery",[]).constant("$",window.$),angular.module("dsTmApp",["ngMaterial","dsTmApp.screens","dsTmApp.models","dsTmApp.components","dsTmApp.i18n","dsTmApp.ext.lodash","dsTmApp.ext.jquery","angucomplete-alt","ngSanitize","ngMessages","ngCookies","infinite-scroll"]).constant("TM_REF",{TWEETS:"https://dazzling-fire-5123.firebaseio.com/tweets",MESSAGES:"https://dazzling-fire-5123.firebaseio.com/messages"}).run(function(){}),angular.module("dsTmApp").config(["$translateProvider","TM_lang",function(a,b){a.preferredLanguage(b.en)}]),angular.module("dsTmApp").config(["$logProvider",function(a){var b="DS_CONF_VAL(LOG_DISABLED)",c=b.indexOf("LOG_DISABLED")>=0,d=c||"true"!==b;a.debugEnabled(d)}]),angular.module("dsTmApp").constant("amTimeAgoConfig",{preprocess:"utc"}),angular.module("dsTmApp").constant("TM_stateConst",{RT:"rt",WORKSPACE:"rt.workspace",QUEUE:"rt.queue",ONBOARDING:"onboarding",ONBOARDING_FINISH:"onboarding-finish"}).config(["$stateProvider","$urlRouterProvider","TM_stateConst",function(a,b,c){b.otherwise("/"),a.state(c.RT,{url:"/",templateUrl:"src/layouts/main.layout.html",controller:"MainLayout"}).state(c.WORKSPACE,{url:"^/workspace",templateUrl:"src/layouts/workspace/workspace.layout.html",controller:"WorkspaceLayout"}).state(c.ONBOARDING,{url:"^/onboarding",templateUrl:"src/layouts/onboarding/onboarding.layout.html",controller:"OnboardingLayout"}).state("TM_stateConst.ONBOARDING_FINISH",{url:"^/onboarding-finish",templateUrl:"src/layouts/login.html",controller:"LoginController"}).state("login",{url:"^/login",templateUrl:"src/layouts/login.html",controller:"LoginController"})}]),angular.module("dsTmApp").config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|data):/)}]),angular.module("dsTmApp.i18n").config(["$translateProvider","TM_lang",function(a,b){a.translations(b.en,{})}]),angular.module("dsTmApp.i18n").config(["$translateProvider","TM_lang",function(a,b){a.translations(b.id,{})}]),angular.module("dsTmApp.screens").controller("LoginController",["$","$scope",function(a,b){b.login=function(){console.log("login")}}]),angular.module("dsTmApp.screens").controller("MainLayout",["$",function(a){}]),angular.module("dsTmApp.screens").controller("OnboardingLayout",["$scope","TM_stateConst","$state",function(a,b,c){a.curStep="0",a.nextStep=function(){a.curStep++,a.curStep>=4&&c.go(b.ONBOARDING_FINISH)}}]),angular.module("dsTmApp.screens").controller("WorkspaceLayout",["$timeout","$scope","$firebaseObject","$firebaseArray","TM_REF","Firebase",function(a,b,c,d,e,f){function g(){b.isTweetLoading=!0,k.orderByChild("answered").startAt(null).endAt(0).limitToFirst(1).once("child_added",h)}function h(a,d){l=new f(e.TWEETS+"/"+a.key()),b.tweet=c(l),b.tweet.$loaded().then(function(a){b.isTweetLoading=!1,i(a)})["catch"](function(a){console.log(a)})}function i(a){a.answered=1,a.$save()}function j(){b.tweet.answered=2,b.tweet.response=b.response,b.response={name:"",message:""},b.tweet.$save(),g()}var k=new f(e.TWEETS),l=null;b.tweet=null,b.isTweetLoading=!0,b.answerTweet=j,b.response={name:"",message:""},g(),angular.element(window).bind("unload",function(a){1===b.tweet.answered&&(b.tweet.answered=0,b.tweet.$save())}),b.onKpiSave=function(a){console.log(a)}}]),angular.module("dsTmApp.components").directive("dsTmKpiForm",function(){return{templateUrl:"src/shared-directives/kpi-form/kpi-form.de.html",restrict:"E",scope:{model:"=",onSave:"&"},controller:"KpiFormCtrl"}}).controller("KpiFormCtrl",["$scope",function(a){a.model=[{title:"Handled inquiry",type:"amount",value:0,checked:!1},{title:"Email response time",type:"time",value_min:0,value_sec:0,checked:!1},{title:"Mention response time",type:"time",value_min:0,value_sec:0,checked:!1}],a.getNumber=function(a){for(var b=[],c=0;a>c;++c)b.push(c);return b},a.save=function(){a.onSave({kpis:a.model})}}]),angular.module("dsTmApp.components").directive("dsTmQueue",function(){return{templateUrl:"src/shared-directives/queue/queue.dea.html",restrict:"EA",scope:{model:"="},controller:"QueueCtrl"}}).controller("QueueCtrl",["$scope","$firebaseArray","TM_REF","Firebase",function(a,b,c,d){var e=new d(c.TWEETS);a.tweets=b(e),a.isTweetLoading=!0,a.tweets.$loaded().then(function(b){a.isTweetLoading=!1})["catch"](function(a){console.log(a)})}]),angular.module("dsTmApp").directive("dsTmStepsIndicator",function(){return{templateUrl:"src/shared-directives/steps-indicator/steps-indicator.de.html",restrict:"E",scope:{curStep:"=",numSteps:"="},controller:"StepsIndicatorCtrl"}}).controller("StepsIndicatorCtrl",["$scope","_",function(a,b){a.steps=b.range(a.numSteps)}]),angular.module("dsTmApp.components").directive("dsTmTeamConfig",function(){return{templateUrl:"src/shared-directives/team-config/team-config.de.html",restrict:"E",controller:"TeamConfigCtrl"}}).controller("TeamConfigCtrl",["$scope","TeamInputDialogService",function(a,b){function c(){b.open().then(function(b){a.teams.push(b)})}a.showTeamInputDialog=c,a.teams=[]}]),angular.module("dsTmApp.components").service("TeamInputDialogService",["$mdDialog",function(a){this.open=function(b){return a.show({templateUrl:"src/shared-directives/team-config/team-input-dialog/team-input-dialog.de.html",targetEvent:b,controller:"TeamInputDialogCtrl"})}}]).controller("TeamInputDialogCtrl",["$scope","$mdDialog",function(a,b){a.teamName="",a.onCreated=function(){b.hide(a.teamName)}}]),angular.module("dsTmApp.components").directive("dsTmTeamList",function(){return{templateUrl:"src/shared-directives/team-config/team-list/team-list.de.html",scope:{teams:"="},restrict:"E",controller:"TeamListCtrl"}}).controller("TeamListCtrl",["$scope",function(a){function b(b){var c=a.teams.indexOf(b);a.teams.splice(c,1)}a.removeTeam=b}]),angular.module("dsTmApp.components").directive("dsTmTweet",function(){return{templateUrl:"src/shared-directives/tweet/tweet.dea.html",restrict:"EA",scope:{model:"=",showCtrl:"@"},controller:"TweetCtrl"}}).controller("TweetCtrl",["$scope","$firebaseObject","$firebaseArray","TM_REF","Firebase",function(a,b,c,d,e){a.makeUnanswered=function(a){var b=new e(d.TWEETS+"/"+a.$id);b.update({answered:0})},a.makeAnswered=function(a){var b=new e(d.TWEETS+"/"+a.$id);b.update({answered:2})},a.isAnswered=function(){return a.model&&a.model.answered&&2===a.model.answered},a.isBeingAnswered=function(){return a.model&&a.model.answered&&1===a.model.answered}}]),angular.module("dsTmApp.components").constant("TM_Keycode",{SPACE:32,ENTER:13}),angular.module("dsTmApp.models").factory("Loadable",["_","$q",function(a,b){var c=function(a){this._val=a,this._lastPromise=b.when(a),this._lastPromise.done=!0,this._err=null,this._isErr=!1};c.prototype.isPending=function(){return!this._lastPromise.done},c.prototype.error=function(a){return this._err=void 0===a?this._err:a,this._err},c.prototype.asPromise=function(b){return this._lastPromise.then(function(d){return b&&a.isArray(d)?c.resolveLoadables(d,b):d})},c.prototype.value=function(a){return this._val=void 0===a?this._val:a,this._val},c.prototype.isError=function(a){return this._isErr=void 0===a?this._isErr:a,this._isErr},c.prototype.then=function(a){return this._lastPromise=this._lastPromise.then(a).then(d(this))["catch"](e(this)),this._lastPromise["finally"](f(this._lastPromise)),this},c.prototype.nthen=function(a){var b=this;return this._lastPromise=this._lastPromise["catch"](function(){return b.value()}),this.then(a)},c.prototype["catch"]=function(a){return this._lastPromise=this._lastPromise["catch"](a)["catch"](e(this)).then(d(this)),this._lastPromise["finally"](f(this._lastPromise)),this},c.prototype.ifnThen=function(a){return this.isPending()?this:this.nthen(a)},c.toLoadables=function(b){return a.map(b,function(a){return new c(a)})},c.resolveLoadables=function(c,d){var e=a.map(c,function(b){return(b.asPromise||a.constant(b)).bind(b)(d)});return b.all(e)};var d=function(a){return function(b){return a.isError(!1),a.value(b)}},e=function(a){return function(c){return a.isError(!0),b.reject(a.error(c))}},f=function(a){return function(){a.done=!0}};return c}]),angular.module("dsTmApp.components").service("Logger",["$log","TmToastT","$translate",function(a,b,c){this.logSuccess=function(a){return function(c){return angular.isObject(a)?b.succ(a.message,a.params):a&&b.succ(a),c}},this.logError=function(d){return function(e){throw angular.isObject(d)?(a.debug(c.instant(d.message,d.params),e),b.err(d.message,d.params)):(a.debug(d,e),b.err(d)),e}},this.log=function(a,b,c){return a.then(this.logSuccess(b))["catch"](this.logError(c))}}]),angular.module("dsTmApp").run(["$templateCache",function(a){a.put("src/layouts/login.html",'<div layout="column" align="center" layout-align="center"> <div layout="column" align="center"> <h1 style="margin-bottom: 0">Your Social Media Management</h1> <h3 style="margin-top: 0">Manage multiple social media accounts in one place, collaboratively</h3> </div> <div layout="column"> <h2>Login</h2> <div layout="row" layout-align="center"> <md-button class="md-raised md-primary" ng-click="login()">Facebook</md-button> <md-button class="md-raised md-primary" ng-click="login()">Twitter</md-button> <md-button class="md-raised md-primary" ng-click="login()">Email</md-button> </div> </div> </div>'),a.put("src/layouts/main.layout.html",'<nav class="white" role="navigation"> <div class="nav-wrapper container"> <a id="logo-container" href="#!" class="brand-logo">Real Time</a> </div> </nav> <div id="main-container" class="container"> <div class="section" ui-view></div> </div>'),a.put("src/layouts/onboarding/onboarding.layout.html",'<div layout="row" layout-align="center"> <div layout="column" layout-margin layout-align="center"> <div layout="row" layout-align="center" layout-margin> <span>Hello, Imam! Before you start on the journey, please configure your team first. You\'ll find it easier to track them later!</span> </div> <div layout="row" layout-align="center" layout-margin> <ds-tm-steps-indicator num-steps="4" cur-step="curStep"> </ds-tm-steps-indicator> </div>  <div layout="column" ng-if="curStep == 0"> <h3>Team Configuration</h3> <ds-tm-team-config></ds-tm-team-config> </div> <div layout="column" ng-if="curStep == 1"> <h3>Account Configuration</h3> <ds-tm-team-config></ds-tm-team-config> </div> <div layout="column" ng-if="curStep == 2"> <h3>Member Configuration</h3> <ds-tm-team-config></ds-tm-team-config> </div> <div layout="column" ng-if="curStep == 3"> <h3>KPI Configuration</h3> <ds-tm-team-config></ds-tm-team-config> </div>  <div layout="row" layout-align="end center"> <md-button class="md-raised md-primary" ng-click="nextStep()">Next</md-button> </div> </div> </div>'),a.put("src/layouts/workspace/workspace.layout.html",'<ds-tm-steps-indicator num-steps="3" cur-step="0"> </ds-tm-steps-indicator> <ds-tm-kpi-form model="kpis" on-save="onKpiSave(kpis)"></ds-tm-kpi-form>'),a.put("src/shared-directives/kpi-form/kpi-form.de.html",'<div layout="row" layout-wrap ng-repeat="kpi in model"> <div flex="50"> <md-checkbox ng-model="kpi.checked" aria-label="kpi.title"> {{kpi.title}} </md-checkbox> </div> <div flex="50" ng-switch="kpi.type"> <div layout="row" ng-switch-when="amount"> <md-select ng-model="kpi.value" placeholder="Amount"> <md-option ng-repeat="val in getNumber(60) track by $index" value="{{val}}">{{val}} per person</md-option> </md-select> </div> <div layout="row" ng-switch-when="time"> <md-select ng-model="kpi.value_min" placeholder="Amount" flex="50"> <md-option ng-repeat="val in getNumber(60) track by $index" value="{{val}}">{{val}} min</md-option> </md-select> <md-select ng-model="kpi.value_sec" placeholder="Amount" flex="50"> <md-option ng-repeat="val in getNumber(60) track by $index" value="{{val}}">{{val}} sec</md-option> </md-select> </div> </div> </div> <div layout="row" layout-align="end center"> <md-button class="md-raised md-primary" ng-click="save()">Save Changes</md-button> </div>'),a.put("src/shared-directives/queue/queue.dea.html",'<ul class="col s12 collection"> <li class="collection-item" ng-show="isTweetLoading"> Loading queue(s)... </li> <li class="collection-item avatar" ng-repeat="tweet in tweets" ds-tm-tweet model="tweet" show-ctrl="true"> </li> </ul>'),a.put("src/shared-directives/steps-indicator/steps-indicator.de.html",'<span ng-repeat="n in steps"> <md-button class="md-fab md-mini" ng-disabled="n != curStep"> {{ n+1 }} </md-button> <div style="display:inline-block; width: 100px; border: 1px solid #cccccc" ng-if="!$last"></div> </span>'),a.put("src/shared-directives/team-config/team-config.de.html",'<div layout="column"> <div flex> <md-button class="md-raised" ng-click="showTeamInputDialog()">Add Team Name +</md-button> <ds-tm-team-list teams="teams"></ds-tm-team-list> </div> </div>'),a.put("src/shared-directives/team-config/team-input-dialog/team-input-dialog.de.html",'<md-dialog> <md-content> <md-input-container flex> <label>Team Name</label> <input ng-model="teamName"> </md-input-container> <div layout="row" layout-align="end center"> <md-button class="md-primary" ng-click="onCreated(teamName)">Add Team</md-button> </div> </md-content> </md-dialog>'),a.put("src/shared-directives/team-config/team-list/team-list.de.html",'<div ng-repeat="team in teams"> <span>{{team}}</span> <md-button ng-click="removeTeam(team)">X</md-button> </div>'),a.put("src/shared-directives/tweet/tweet.dea.html",'<img ng-src="{{model.user.profile_image_url_https}}" alt="" class="circle"> <div class="title">{{model.user.screen_name}}</div> <small>{{model.created_at}}</small> <p>{{model.text}}</p> <div><small ng-show="{{showCtrl}}">Responded by: {{model.response.name}}</small></div> <div><small ng-show="{{showCtrl}}">Response: {{model.response.message}}</small></div> <a class="waves-effect waves-light btn" ng-click="makeAnswered(model)" ng-show="!isBeingAnswered() && !isAnswered() && {{showCtrl}}"> Answer </a> <a class="waves-effect waves-light btn disabled" ng-show="isBeingAnswered() && {{showCtrl}}"> In progress </a> <a class="waves-effect waves-light btn" ng-click="makeUnanswered(model)" ng-show="isAnswered() && {{showCtrl}}"> Un-answer </a>')}]);